<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="modx.subsilver.en.xsl"?>
<!--For security purposes, please check: http
://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.0.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
		
		<title lang="en">Light Box 2 Mod (subSilver 2 based install)</title>		
		
		<description lang="en">
        This will add Light Box 2.04 the latest version of light box animated image viewing to your
        forum. It will be used for attatched images if your server has ImageMagic installed and enabled. You can also use BBC 
        to link in images that will automatically be shown as thumbs.</description>
				
		<author-notes lang="en">Adding the files the way I have it in the install.xml makes it so you only have to do 
            the couple edits to use this in all styles you have installed.</author-notes>
		
		<author-group>
			<author>
				<realname>Jeff</realname>
				<username>topdown</username>
				<homepage>http://webmastersunited.org</homepage>
			</author>
			<author>
                <username></username>
				<realname>Origional Author - Highway of Life</realname>				
			</author>			
		</author-group>
		
		<mod-version>1.0.0 Beta</mod-version>
		
		<installation>
			<level>easy</level>
			<time>180</time>
			<target-version>3.0.2</target-version>
		</installation>
		
		<history>
			<entry>
				<date>2008-08-10</date>
				<rev-version>1.0.0 Beta</rev-version>
				<changelog lang="en">
					<change>Finished Mod X and packaging (Released version 1.0.0 Beta)</change>
				</changelog>
			</entry>
			<entry>
				<date>2008-07-25</date>
				<rev-version>1.0.0a</rev-version>
				<changelog lang="en">
					<change>pre-release testing</change>
					<change>Local and Live site.</change>
				</changelog>				        
			</entry>			
		</history>
        <link-group>
			<link type="parent" href="../install.xml" lang="en">Main install file</link>
		</link-group>
	</header>

	<action-group>
        <copy>
            <file from="See the install.xml" to="/" />
		</copy>
		<open src="styles/subsilver2/template/attachment.html">
			<edit>
				<comment lang="en">This will only work if you have ImageMagic installed and running on your server.
                Most servers do, basically if the thumb generator settings in your ACP work, this will also.</comment>
            </edit>
            <edit>
				<find><![CDATA[<!-- IF _file.S_THUMBNAIL -->
			<a href="{_file.U_DOWNLOAD_LINK}"><img src="{_file.THUMB_IMAGE}" alt="{_file.DOWNLOAD_NAME}" /></a><br />]]></find>
				<action type="replace-with"><![CDATA[<!-- IF _file.S_THUMBNAIL -->
			<a href="{_file.U_DOWNLOAD_LINK}/{_file.DOWNLOAD_NAME}" rel="lightbox[gallery]"<!-- IF _file.COMMENT --> title="{_file.COMMENT}"<!-- ENDIF -->><img src="{_file.THUMB_IMAGE}" alt="{_file.DOWNLOAD_NAME}" /></a><br />]]></action>
			</edit>
        </open>
        <open src="styles/subsilver2/template/overall_header.html">
			<edit>
				<find><![CDATA[</head>]]></find>
                <action type="before-add"><![CDATA[<!-- lightbox mod -->
        <link rel="stylesheet" href="css/lightbox.css" type="text/css" media="screen" />
	<script src="js/prototype.js" type="text/javascript"></script>
	<script src="js/scriptaculous.js?load=effects,builder" type="text/javascript"></script>
	<script src="js/lightbox.js" type="text/javascript"></script>
<!-- lightbox mod -->]]></action>
			</edit>
		</open>
		<open src="Your Forum ACP / Posting Tab / Add a New BBCode">
			<edit>
				<comment lang="en">This part is to add the BBC to your posting box., you can name Img2 what ever you want.</comment>
            </edit>
            <edit>
                <comment lang="en">BBCode usage</comment>
				<action type="add"><![CDATA[[Img2={URL}]{TEXT}[/Img2]]]></action>
            </edit>
            <edit>
                <comment lang="en">HTML Replacement</comment>
				<action type="add"><![CDATA[<a href="{URL}" title="{TEXT}" rel="lightbox[page]">
<img src="{URL}" alt="{TEXT}" height="80" width="120" /></a>
<p>{TEXT}</p>]]></action>
            </edit>
            <edit>
                <comment lang="en">Help Line</comment>
				<action type="add"><![CDATA[[img2=http://Link to the Image.jpg]Title - Dscription[/img2]]]></action>
            </edit>
            <edit>
                <comment lang="en">Check the box so your members can use it and Submit.</comment>
			</edit>
        </open>
		<diy-instructions lang="en">Save all file edits, then go to your ACP styles tab / templates / your style / refresh.
            Go to your ACP / Attatchment Settings / Set Create thumbnail: to YES and set the Maximum thumbnail width in pixel: to the size you want.
            This will only work if there is a path in the Imagemagick path: box</diy-instructions>
	</action-group>
</mod>
